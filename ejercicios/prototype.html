<!DOCTYPE html>
<html lang="en">
<head>
    <title>Prototype</title>
</head>
<body>
    <a href="/ejercicios/">Go back</a>
    <p><em>Abre la consola</em></p>

    <script>
        /* const zelda = {
            name: "Zelda"
        }

        zelda.saludar = function(){
            console.log(`Hola, soy ${this.name}`)
        }

        zelda.saludar();

        const link = {
            name: "Link"
        }

        link.saludar = function(){
            console.log(`Hola, soy ${this.name}`)
        }

        link.saludar(); */

        //Mismo código para 2 objetos similares
        //Siendo más eficientes:

        //constructor
        /* function Hero(name){
            const hero = {
                name: name
            }

            hero.saludar = function(){
                console.log(`Hola, soy ${this.name}`)
            }

            return hero;
        }

        const zelda = Hero("Zelda")
        zelda.saludar()

        const link = Hero("Link")
        link.saludar() */

        //Más eficientes aún: evitar crear la misma función cada vez

/*         const heroMethods = {
            saludar: function(){
                console.log(`Me llamo ${this.name}`)
            }
        }

        function Hero(name){
            const hero = {
                name: name
            }

            hero.saludar = heroMethods.saludar;
            return hero;
        }

        const zelda = Hero("Zelda")
        zelda.saludar()

        const link = Hero("Link")
        link.saludar() */

        //Más eficiente, usando Object.create
        /* const heroMethods = {
            saludar: function(){
                console.log(`Soy superheroe! ${this.name}`)
            }
        }

        function Hero(name){
            const hero = Object.create(heroMethods) //hereda las propiedad de heroMethod (saludar)
            hero.name = name;
            return hero;
        }

        const zelda = Hero("Zelda")
        zelda.saludar()

        const link = Hero("Link")
        link.saludar() */

        //Una mejora usando el prototype
        /* function Hero(name){
            const hero = Object.create(Hero.prototype) //hereda las propiedades del prototype (saludar)
            hero.name = name;
            return hero;
        }

        Hero.prototype.saludar = function(){
            console.log(`Soy superheroe! ${this.name}`)
        }

        const zelda = Hero("Zelda")
        zelda.saludar()

        const link = Hero("Link")
        link.saludar() */


        //Usando new para llevar Hero.prototype al objeto
        function Hero(name){
            //const hero = Object.create(Hero.prototype) //el new es un atajo porque tiene el mismo efecto de esta línea
            //Usa el prototype de Hero porque es lo que está luego del new y lo guarda en this
            //Serìa como: 
            //this = Object.create(Hero.prototype)
            this.name = name;
            //return this ocurre implícitamente, no hay que hacerlo
        }

        Hero.prototype.saludar = function(){
            console.log(`New: ${this.name}`)
        }

        const zelda = new Hero("Zelda")
        zelda.saludar()

        const link = new Hero("Link")
        link.saludar()

    </script>
</body>
</html>